import{c as e,r as t,j as a,o as n,L as s,aY as r,u as l,m as i,I as o,B as c,aZ as d,t as u,s as m,a_ as p,a$ as h,ao as f}from"./index-BKzwkbhU.js";import{C as x,a as v,b as g,d as y,c as j}from"./card-d84NS_n5.js";import{F as b,C as w,a as N,u as S,t as k,z as C}from"./index-Ce1Og8sm.js";import{R as E}from"./refresh-cw-g0nJKCu_.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),M=e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),I=e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),R=e("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]),F=e("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),D=e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),T=b,A=t.createContext({}),B=({...e})=>a.jsx(A.Provider,{value:{name:e.name},children:a.jsx(w,{...e})}),L=()=>{const e=t.useContext(A),a=t.useContext(O),{getFieldState:n,formState:s}=N(),r=n(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:l}=a;return{id:l,name:e.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...r}},O=t.createContext({}),W=t.forwardRef((({className:e,...s},r)=>{const l=t.useId();return a.jsx(O.Provider,{value:{id:l},children:a.jsx("div",{ref:r,className:n("space-y-2",e),...s})})}));
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */W.displayName="FormItem";const $=t.forwardRef((({className:e,...t},r)=>{const{error:l,formItemId:i}=L();return a.jsx(s,{ref:r,className:n(l&&"text-destructive",e),htmlFor:i,...t})}));$.displayName="FormLabel";const _=t.forwardRef((({...e},t)=>{const{error:n,formItemId:s,formDescriptionId:l,formMessageId:i}=L();return a.jsx(r,{ref:t,id:s,"aria-describedby":n?`${l} ${i}`:`${l}`,"aria-invalid":!!n,...e})}));_.displayName="FormControl";t.forwardRef((({className:e,...t},s)=>{const{formDescriptionId:r}=L();return a.jsx("p",{ref:s,id:r,className:n("text-sm text-muted-foreground",e),...t})})).displayName="FormDescription";const V=t.forwardRef((({className:e,children:t,...s},r)=>{const{error:l,formMessageId:i}=L(),o=l?String(null==l?void 0:l.message):t;return o?a.jsx("p",{ref:r,id:i,className:n("text-sm font-medium text-destructive",e),...s,children:o}):null}));V.displayName="FormMessage";const H=C.object({email:C.string().email("Please enter a valid email address"),password:C.string().min(6,"Password must be at least 6 characters")}),z=({onForgotPassword:e,onSignUpClick:n})=>{const{signInWithEmail:s}=l(),[r,d]=t.useState(!1),u=S({resolver:k(H),defaultValues:{email:"",password:""}}),m={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:.1*e,duration:.3}})};return a.jsx(T,{...u,children:a.jsxs("form",{onSubmit:u.handleSubmit((async e=>{d(!0);try{await s(e.email,e.password)}catch(t){}finally{d(!1)}})),className:"space-y-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx(i.div,{variants:m,custom:0,children:a.jsx(B,{control:u.control,name:"email",render:({field:e})=>a.jsxs(W,{children:[a.jsx($,{children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_,{children:a.jsx(o,{type:"email",placeholder:"you@example.com",className:"pl-10",...e})})]}),a.jsx(V,{})]})})}),a.jsx(i.div,{variants:m,custom:1,children:a.jsx(B,{control:u.control,name:"password",render:({field:t})=>a.jsxs(W,{children:[a.jsx($,{children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_,{children:a.jsx(o,{type:"password",placeholder:"••••••••",className:"pl-10",...t})})]}),a.jsx("div",{className:"text-right",children:a.jsx(c,{type:"button",variant:"link",className:"text-xs p-0 h-auto",onClick:e,children:"Forgot password?"})}),a.jsx(V,{})]})})})]}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx(c,{type:"submit",className:"w-full",disabled:r,children:r?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-t-transparent border-white animate-spin"}),a.jsx("span",{children:"Signing in..."})]}):"Sign in with Email"}),a.jsx(c,{type:"button",variant:"link",className:"w-full",onClick:n,children:"Don't have an account? Sign up"})]})]})})},U=C.object({fullName:C.string().min(2,"Please enter your full name"),email:C.string().email("Please enter a valid email address"),password:C.string().min(6,"Password must be at least 6 characters")}),G=({onLoginClick:e,onSignUpSuccess:n})=>{const{signUp:s}=l(),[r,u]=t.useState(!1),[m,p]=t.useState(null),h=S({resolver:k(U),defaultValues:{fullName:"",email:"",password:""}}),f={hidden:{opacity:0,x:-20},visible:e=>({opacity:1,x:0,transition:{delay:.1*e,duration:.3}})};return a.jsx(T,{...h,children:a.jsxs("form",{onSubmit:h.handleSubmit((async e=>{u(!0),p(null);try{const t=await s(e.email,e.password,e.fullName);(null==t?void 0:t.email)&&n(t.email)}catch(t){p(t.message||"An error occurred during sign up")}finally{u(!1)}})),className:"space-y-4",children:[a.jsxs("div",{className:"space-y-4",children:[m&&a.jsx(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-md bg-destructive/10 text-destructive text-sm",children:m}),a.jsx(i.div,{variants:f,custom:0,children:a.jsx(B,{control:h.control,name:"fullName",render:({field:e})=>a.jsxs(W,{children:[a.jsx($,{children:"Full Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_,{children:a.jsx(o,{placeholder:"John Doe",className:"pl-10",...e})})]}),a.jsx(V,{})]})})}),a.jsx(i.div,{variants:f,custom:1,children:a.jsx(B,{control:h.control,name:"email",render:({field:e})=>a.jsxs(W,{children:[a.jsx($,{children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_,{children:a.jsx(o,{type:"email",placeholder:"you@example.com",className:"pl-10",...e})})]}),a.jsx(V,{})]})})}),a.jsx(i.div,{variants:f,custom:2,children:a.jsx(B,{control:h.control,name:"password",render:({field:e})=>a.jsxs(W,{children:[a.jsx($,{children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(_,{children:a.jsx(o,{type:"password",placeholder:"••••••••",className:"pl-10",...e})})]}),a.jsx(V,{})]})})})]}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx(c,{type:"submit",className:"w-full",disabled:r,children:r?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-t-transparent border-white animate-spin"}),a.jsx("span",{children:"Creating account..."})]}):"Sign up"}),a.jsx(c,{type:"button",variant:"link",className:"w-full",onClick:e,children:"Already have an account? Sign in"})]})]})})};var q=Object.defineProperty,J=Object.defineProperties,K=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,Q=(e,t,a)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var ee=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");var te=t.createContext({}),ae=t.forwardRef(((e,a)=>{var n,s,r,l,i,o=e,{value:c,onChange:d,maxLength:u,textAlign:m="left",pattern:p,placeholder:h,inputMode:f="numeric",onComplete:x,pushPasswordManagerStrategy:v="increase-width",pasteTransformer:g,containerClassName:y,noScriptCSSFallback:j=se,render:b,children:w}=o,N=((e,t)=>{var a={};for(var n in e)Y.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&X)for(var n of X(e))t.indexOf(n)<0&&Z.call(e,n)&&(a[n]=e[n]);return a})(o,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);let[S,k]=t.useState("string"==typeof N.defaultValue?N.defaultValue:""),C=null!=c?c:S,E=function(e){let a=t.useRef();return t.useEffect((()=>{a.current=e})),a.current}(C),P=t.useCallback((e=>{null==d||d(e),k(e)}),[d]),M=t.useMemo((()=>p?"string"==typeof p?new RegExp(p):p:null),[p]),I=t.useRef(null),R=t.useRef(null),F=t.useRef({value:C,onChange:P,isIOS:"undefined"!=typeof window&&(null==(s=null==(n=null==window?void 0:window.CSS)?void 0:n.supports)?void 0:s.call(n,"-webkit-touch-callout","none"))}),D=t.useRef({prev:[null==(r=I.current)?void 0:r.selectionStart,null==(l=I.current)?void 0:l.selectionEnd,null==(i=I.current)?void 0:i.selectionDirection]});t.useImperativeHandle(a,(()=>I.current),[]),t.useEffect((()=>{let e=I.current,t=R.current;if(!e||!t)return;function a(){if(document.activeElement!==e)return W(null),void _(null);let t,a=e.selectionStart,n=e.selectionEnd,s=e.selectionDirection,r=e.maxLength,l=e.value,i=D.current.prev,o=-1,c=-1;if(0!==l.length&&null!==a&&null!==n){let e=a===n,s=a===l.length&&l.length<r;if(e&&!s){let e=a;if(0===e)o=0,c=1,t="forward";else if(e===r)o=e-1,c=e,t="backward";else if(r>1&&l.length>1){let a=0;if(null!==i[0]&&null!==i[1]){t=e<i[1]?"backward":"forward";let n=i[0]===i[1]&&i[0]<r;"backward"===t&&!n&&(a=-1)}o=a+e,c=a+e+1}}-1!==o&&-1!==c&&o!==c&&I.current.setSelectionRange(o,c,t)}let d=-1!==o?o:a,u=-1!==c?c:n,m=null!=t?t:s;W(d),_(u),D.current.prev=[d,u,m]}if(F.current.value!==e.value&&F.current.onChange(e.value),D.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection],document.addEventListener("selectionchange",a,{capture:!0}),a(),document.activeElement===e&&L(!0),!document.getElementById("input-otp-style")){let e=document.createElement("style");if(e.id="input-otp-style",document.head.appendChild(e),e.sheet){let t="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";ne(e.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),ne(e.sheet,`[data-input-otp]:autofill { ${t} }`),ne(e.sheet,`[data-input-otp]:-webkit-autofill { ${t} }`),ne(e.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),ne(e.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let n=()=>{t&&t.style.setProperty("--root-height",`${e.clientHeight}px`)};n();let s=new ResizeObserver(n);return s.observe(e),()=>{document.removeEventListener("selectionchange",a,{capture:!0}),s.disconnect()}}),[]);let[T,A]=t.useState(!1),[B,L]=t.useState(!1),[O,W]=t.useState(null),[$,_]=t.useState(null);t.useEffect((()=>{!function(e){setTimeout(e,0),setTimeout(e,10),setTimeout(e,50)}((()=>{var e,t,a,n;null==(e=I.current)||e.dispatchEvent(new Event("input"));let s=null==(t=I.current)?void 0:t.selectionStart,r=null==(a=I.current)?void 0:a.selectionEnd,l=null==(n=I.current)?void 0:n.selectionDirection;null!==s&&null!==r&&(W(s),_(r),D.current.prev=[s,r,l])}))}),[C,B]),t.useEffect((()=>{void 0!==E&&C!==E&&E.length<u&&C.length===u&&(null==x||x(C))}),[u,x,E,C]);let V=function({containerRef:e,inputRef:a,pushPasswordManagerStrategy:n,isFocused:s}){let[r,l]=t.useState(!1),[i,o]=t.useState(!1),[c,d]=t.useState(!1),u=t.useMemo((()=>"none"!==n&&("increase-width"===n||"experimental-no-flickering"===n)&&r&&i),[r,i,n]),m=t.useCallback((()=>{let t=e.current,s=a.current;if(!t||!s||c||"none"===n)return;let r=t,i=r.getBoundingClientRect().left+r.offsetWidth-18,o=r.getBoundingClientRect().top+r.offsetHeight/2;0===document.querySelectorAll(ee).length&&document.elementFromPoint(i,o)===t||(l(!0),d(!0))}),[e,a,c,n]);return t.useEffect((()=>{let t=e.current;if(!t||"none"===n)return;function a(){let e=window.innerWidth-t.getBoundingClientRect().right;o(e>=40)}a();let s=setInterval(a,1e3);return()=>{clearInterval(s)}}),[e,n]),t.useEffect((()=>{let e=s||document.activeElement===a.current;if("none"===n||!e)return;let t=setTimeout(m,0),r=setTimeout(m,2e3),l=setTimeout(m,5e3),i=setTimeout((()=>{d(!0)}),6e3);return()=>{clearTimeout(t),clearTimeout(r),clearTimeout(l),clearTimeout(i)}}),[a,s,n,m]),{hasPWMBadge:r,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:"40px"}}({containerRef:R,inputRef:I,pushPasswordManagerStrategy:v,isFocused:B}),H=t.useCallback((e=>{let t=e.currentTarget.value.slice(0,u);t.length>0&&M&&!M.test(t)?e.preventDefault():("string"==typeof E&&t.length<E.length&&document.dispatchEvent(new Event("selectionchange")),P(t))}),[u,P,E,M]),z=t.useCallback((()=>{var e;if(I.current){let t=Math.min(I.current.value.length,u-1),a=I.current.value.length;null==(e=I.current)||e.setSelectionRange(t,a),W(t),_(a)}L(!0)}),[u]),U=t.useCallback((e=>{var t,a;let n=I.current;if(!(g||F.current.isIOS&&e.clipboardData&&n))return;let s=e.clipboardData.getData("text/plain"),r=g?g(s):s;e.preventDefault();let l=null==(t=I.current)?void 0:t.selectionStart,i=null==(a=I.current)?void 0:a.selectionEnd,o=(l!==i?C.slice(0,l)+r+C.slice(i):C.slice(0,l)+r+C.slice(l)).slice(0,u);if(o.length>0&&M&&!M.test(o))return;n.value=o,P(o);let c=Math.min(o.length,u-1),d=o.length;n.setSelectionRange(c,d),W(c),_(d)}),[u,P,M,C]),G=t.useMemo((()=>({position:"relative",cursor:N.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"})),[N.disabled]),q=t.useMemo((()=>({position:"absolute",inset:0,width:V.willPushPWMBadge?`calc(100% + ${V.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:V.willPushPWMBadge?`inset(0 ${V.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:m,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"})),[V.PWM_BADGE_SPACE_WIDTH,V.willPushPWMBadge,m]),ae=t.useMemo((()=>t.createElement("input",((e,t)=>J(e,K(t)))(((e,t)=>{for(var a in t||(t={}))Y.call(t,a)&&Q(e,a,t[a]);if(X)for(var a of X(t))Z.call(t,a)&&Q(e,a,t[a]);return e})({autoComplete:N.autoComplete||"one-time-code"},N),{"data-input-otp":!0,"data-input-otp-placeholder-shown":0===C.length||void 0,"data-input-otp-mss":O,"data-input-otp-mse":$,inputMode:f,pattern:null==M?void 0:M.source,"aria-placeholder":h,style:q,maxLength:u,value:C,ref:I,onPaste:e=>{var t;U(e),null==(t=N.onPaste)||t.call(N,e)},onChange:H,onMouseOver:e=>{var t;A(!0),null==(t=N.onMouseOver)||t.call(N,e)},onMouseLeave:e=>{var t;A(!1),null==(t=N.onMouseLeave)||t.call(N,e)},onFocus:e=>{var t;z(),null==(t=N.onFocus)||t.call(N,e)},onBlur:e=>{var t;L(!1),null==(t=N.onBlur)||t.call(N,e)}}))),[H,z,U,f,q,u,$,O,N,null==M?void 0:M.source,C]),re=t.useMemo((()=>({slots:Array.from({length:u}).map(((e,t)=>{var a;let n=B&&null!==O&&null!==$&&(O===$&&t===O||t>=O&&t<$),s=void 0!==C[t]?C[t]:null;return{char:s,placeholderChar:void 0!==C[0]?null:null!=(a=null==h?void 0:h[t])?a:null,isActive:n,hasFakeCaret:n&&null===s}})),isFocused:B,isHovering:!N.disabled&&T})),[B,T,u,$,O,N.disabled,C]),le=t.useMemo((()=>b?b(re):t.createElement(te.Provider,{value:re},w)),[w,re,b]);return t.createElement(t.Fragment,null,null!==j&&t.createElement("noscript",null,t.createElement("style",null,j)),t.createElement("div",{ref:R,"data-input-otp-container":!0,style:G,className:y},le,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ae)))}));function ne(e,t){try{e.insertRule(t)}catch(a){}}ae.displayName="Input";var se="\n[data-input-otp] {\n  --nojs-bg: white !important;\n  --nojs-fg: black !important;\n\n  background-color: var(--nojs-bg) !important;\n  color: var(--nojs-fg) !important;\n  caret-color: var(--nojs-fg) !important;\n  letter-spacing: .25em !important;\n  text-align: center !important;\n  border: 1px solid var(--nojs-fg) !important;\n  border-radius: 4px !important;\n  width: 100% !important;\n}\n@media (prefers-color-scheme: dark) {\n  [data-input-otp] {\n    --nojs-bg: black !important;\n    --nojs-fg: white !important;\n  }\n}";const re=t.forwardRef((({className:e,containerClassName:t,...s},r)=>a.jsx(ae,{ref:r,containerClassName:n("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:n("disabled:cursor-not-allowed",e),...s})));re.displayName="InputOTP";const le=t.forwardRef((({className:e,...t},s)=>a.jsx("div",{ref:s,className:n("flex items-center",e),...t})));le.displayName="InputOTPGroup";const ie=t.forwardRef((({index:e,className:s,...r},l)=>{var i;const o=t.useContext(te),c=null==(i=null==o?void 0:o.slots)?void 0:i[e],d=(null==c?void 0:c.char)||"",u=(null==c?void 0:c.hasFakeCaret)||!1,m=(null==c?void 0:c.isActive)||!1;return a.jsxs("div",{ref:l,className:n("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",m&&"z-10 ring-2 ring-ring ring-offset-background",s),...r,children:[d,u&&a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})}));ie.displayName="InputOTPSlot";t.forwardRef((({...e},t)=>a.jsx("div",{ref:t,role:"separator",...e,children:a.jsx(R,{})}))).displayName="InputOTPSeparator";const oe=({email:e,onVerify:n,onResend:r,onBackToLogin:l})=>{const[o,d]=t.useState(""),[u,m]=t.useState(!1),[p,h]=t.useState(!1),[f,x]=t.useState(0),[v,g]=t.useState(""),[y,j]=t.useState(!1);return a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o&&6===o.length){m(!0),g("");try{await n(o),j(!0)}catch(t){g(t.message||"Verification failed. Please try again."),j(!1)}finally{m(!1)}}else g("Please enter a valid 6-digit verification code")},className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(s,{htmlFor:"otp",className:"text-center block",children:["Enter the 6-digit verification code sent to ",e]}),a.jsx("div",{className:"flex justify-center pt-2",children:a.jsx(re,{maxLength:6,value:o,onChange:e=>d(e),inputMode:"numeric",pattern:"\\d*",children:a.jsx(le,{children:Array.from({length:6}).map(((e,t)=>a.jsx(ie,{index:t},t)))})})}),v&&a.jsxs(i.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"flex p-3 mt-2 rounded-md bg-destructive/10 text-destructive items-start gap-3",children:[a.jsx(I,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm",children:v})]}),y&&a.jsxs(i.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"flex p-3 mt-2 rounded-md bg-primary/10 text-primary items-start gap-3",children:[a.jsx(M,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm",children:"Verification successful! Redirecting you to dashboard..."})]})]}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx(c,{type:"submit",className:"w-full",disabled:u||y||6!==o.length,children:u?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-t-transparent border-white animate-spin"}),a.jsx("span",{children:"Verifying..."})]}):"Verify Email"}),a.jsx(c,{type:"button",variant:"outline",className:"w-full flex items-center gap-2",onClick:async()=>{if(!(f>0)){h(!0);try{await r(),x(60);const e=setInterval((()=>{x((t=>t<=1?(clearInterval(e),0):t-1))}),1e3)}catch(e){}finally{h(!1)}}},disabled:p||f>0,children:p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-t-transparent border-primary animate-spin"}),a.jsx("span",{children:"Sending..."})]}):f>0?a.jsxs(a.Fragment,{children:[a.jsx(E,{className:"h-4 w-4"}),a.jsxs("span",{children:["Resend code (",f,"s)"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(E,{className:"h-4 w-4"}),a.jsx("span",{children:"Resend code"})]})}),a.jsx(c,{type:"button",variant:"ghost",className:"w-full",onClick:l,children:"Back to login"})]})]})},ce=({onBackToLogin:e})=>{const[n,r]=t.useState(!1),[l,d]=t.useState(""),[p,h]=t.useState(!1);return a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l&&l.includes("@")){r(!0);try{const{error:e}=await m.auth.resetPasswordForEmail(l,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw e;h(!0),u.success("Password reset link sent to your email")}catch(t){u.error(t.message||"Failed to send reset link")}finally{r(!1)}}else u.error("Please enter a valid email address")},className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(s,{htmlFor:"resetEmail",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(D,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(o,{id:"resetEmail",type:"email",placeholder:"you@example.com",value:l,onChange:e=>d(e.target.value),required:!0,className:"pl-10"})]})]}),p&&a.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex p-3 rounded-md bg-primary/10 text-primary items-start gap-3",children:[a.jsx(M,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm",children:"If an account exists with this email, you'll receive a password reset link shortly."})]}),a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx(c,{type:"submit",className:"w-full",disabled:n||p,children:n?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-t-transparent border-white animate-spin"}),a.jsx("span",{children:"Sending..."})]}):"Send Reset Link"}),a.jsx(c,{type:"button",variant:"ghost",className:"w-full",onClick:e,children:"Back to login"})]})]})},de=()=>{let e=null,n=async(e,t)=>{},s=async e=>{};try{const t=l();e=t.user,n=t.verifyOtp,s=t.resendOtp}catch(C){}const[r,o]=t.useState(!1),[u,m]=t.useState(!1),[b,w]=t.useState(!1),[N,S]=t.useState(""),k=p();if(e)return a.jsx(h,{to:"/app/dashboard",replace:!0});return a.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-b from-background to-secondary/20 relative",children:[a.jsx(c,{variant:"glass",size:"icon",className:"absolute top-4 left-4 hover:bg-[#6E59A5]/10 transition-all duration-300 backdrop-blur-md border border-[#6E59A5]/20 shadow-sm",onClick:()=>{k("/")},children:a.jsx(P,{className:"h-5 w-5 text-[#6E59A5]"})}),a.jsx(f,{mode:"wait",children:a.jsx(i.div,{initial:"hidden",animate:"visible",exit:"exit",variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.3,ease:"easeIn"}}},className:"w-full max-w-md",children:a.jsxs(x,{className:"border-primary/10 shadow-lg backdrop-blur bg-card/90",children:[a.jsxs(v,{className:"space-y-2",children:[a.jsx(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"mx-auto h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center mb-2",children:a.jsx(d,{className:"h-6 w-6 text-primary"})}),a.jsx(g,{className:"text-center text-xl md:text-2xl",children:b?"Verify your email":u?"Reset Password":r?"Create an account":"Welcome back"}),a.jsx(y,{className:"text-center",children:b?`Enter the 6-digit verification code sent to ${N}`:u?"Enter your email and we'll send you a link to reset your password":r?"Sign up to start managing your expenses":"Sign in to your account"})]}),a.jsx(j,{children:b?a.jsx(oe,{email:N,onVerify:async e=>{await n(N,e)},onResend:async()=>{await s(N)},onBackToLogin:()=>{w(!1),S("")}}):u?a.jsx(ce,{onBackToLogin:()=>m(!1)}):r?a.jsx(G,{onLoginClick:()=>o(!1),onSignUpSuccess:e=>{S(e),w(!0)}}):a.jsx(z,{onForgotPassword:()=>m(!0),onSignUpClick:()=>o(!0)})})]})},b?"verification":u?"forgot":r?"signup":"login")})]})};export{de as default};

import{c as e,r as a,j as s,o as t,B as r,f as l,U as n,X as d,t as o,e as i,I as c,M as m,N as x,O as u,Q as h,R as p,a7 as g}from"./index-BKzwkbhU.js";import{C as j}from"./chartUtils-DiUYslSS.js";import{A as f,a as y}from"./alert-CN8C4i7Y.js";import{P as b,a as w,b as N,C as D}from"./popover-DU_c79qr.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),C=e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function M({startDate:e,endDate:i,onStartDateChange:c,onEndDateChange:m,onClear:x,label:u="Date Range",className:h}){const[p,g]=a.useState(!1),[j,f]=a.useState(!1),y=(a,s)=>{if(!s)return;const t=l(s,"yyyy-MM-dd");"start"===a?(c(t),g(!1),i&&new Date(t)>new Date(i)&&(m(t),o.info("End date adjusted to match start date"))):(m(t),f(!1),e&&new Date(t)<new Date(e)&&(c(t),o.info("Start date adjusted to match end date"))),("start"===a&&i||"end"===a&&e)&&o.success("Date filter applied")};return s.jsxs("div",{className:t("space-y-2",h),children:[u&&s.jsx("p",{className:"text-sm font-medium text-foreground mb-2",children:u}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(b,{open:p,onOpenChange:g,children:[s.jsx(w,{asChild:!0,children:s.jsxs(r,{variant:"outline",className:t("justify-start text-left w-full sm:w-[140px]",!e&&"text-muted-foreground",e&&"border-primary/70"),children:[s.jsx(n,{className:"mr-2 h-4 w-4"}),e?l(new Date(e),"MMM d, yyyy"):"Start Date"]})}),s.jsx(N,{align:"start",className:"w-auto p-0 bg-background/95 backdrop-blur-sm border border-border date-picker-popover px-[15px] mx-[20px] my-0 py-[2px]",children:s.jsx(D,{mode:"single",selected:e?new Date(e):void 0,onSelect:e=>y("start",e),initialFocus:!0,defaultMonth:e?new Date(e):new Date,className:"mx-[26px] my-[5px]"})})]}),s.jsxs(b,{open:j,onOpenChange:f,children:[s.jsx(w,{asChild:!0,children:s.jsxs(r,{variant:"outline",className:t("justify-start text-left w-full sm:w-[140px]",!i&&"text-muted-foreground",i&&"border-primary/70"),children:[s.jsx(n,{className:"mr-2 h-4 w-4"}),i?l(new Date(i),"MMM d, yyyy"):"End Date"]})}),s.jsx(N,{align:"end",className:"w-auto p-0 bg-background/95 backdrop-blur-sm border border-border date-picker-popover",children:s.jsx(D,{mode:"single",selected:i?new Date(i):void 0,onSelect:e=>y("end",e),initialFocus:!0,defaultMonth:i?new Date(i):new Date})})]}),(e||i)&&s.jsx(r,{variant:"ghost",size:"icon",onClick:()=>{x(),o.info("Date filter cleared")},className:"h-10 w-10 p-0 sm:self-start",title:"Clear date range","aria-label":"Clear date range",children:s.jsx(d,{className:"h-4 w-4"})})]})]})}function k({searchTerm:e,setSearchTerm:r,categoryFilter:n,setCategoryFilter:d,dateRange:o,setDateRange:b,selectedMonth:w,useCustomDateRange:N,className:D}){const C=i(),[k,S]=a.useState(!1);return s.jsxs("div",{className:t("space-y-3",D),children:[s.jsxs("div",{className:"relative",children:[s.jsx(c,{placeholder:"Search expenses...",value:e,onChange:e=>r(e.target.value),className:"w-full pr-8 rounded-lg"}),C&&s.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-muted-foreground",onClick:()=>S(!k),children:s.jsx(v,{size:18,className:t(k?"text-primary":"")})})]}),!N&&s.jsx(f,{variant:"default",className:"bg-muted/40 border-border/40 py-2",children:s.jsxs(y,{className:"flex items-center text-xs text-muted-foreground",children:["Showing expenses for ",l(w,"MMMM yyyy"),". Use a custom range to override."]})}),(!C||k)&&s.jsxs("div",{className:t("space-y-3 animated-fade-in",C?"p-3 bg-muted/30 rounded-lg border border-border/40":""),children:[s.jsxs("div",{className:t(C?"flex-col space-y-3":"sm:flex sm:items-start sm:justify-between sm:gap-2","flex"),children:[s.jsxs(m,{value:n,onValueChange:d,children:[s.jsx(x,{className:t("rounded-lg bg-background",C?"w-full":"w-[180px]"),children:s.jsx(u,{placeholder:"All Categories"})}),s.jsxs(h,{className:"touch-scroll-container max-h-[40vh]",children:[s.jsx(p,{value:"all",children:"All Categories"}),Object.keys(j).map((e=>s.jsx(p,{value:e,children:e},e)))]})]}),s.jsx(M,{startDate:o.start,endDate:o.end,onStartDateChange:e=>b({...o,start:e}),onEndDateChange:e=>b({...o,end:e}),onClear:()=>{b({start:"",end:""})},label:"",className:t(C?"w-full":"w-auto")})]}),C&&s.jsx("div",{className:"text-right",children:s.jsxs("button",{className:"text-xs text-primary flex items-center gap-1 ml-auto",onClick:()=>S(!1),children:["Hide filters ",s.jsx(g,{size:14})]})})]})]})}export{k as E,C as M};

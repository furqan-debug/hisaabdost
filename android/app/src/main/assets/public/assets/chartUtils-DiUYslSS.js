var t,e,s,i,r,a,n,o,h,c,u,l,d,p,f,y,b,v,g,m,R,w,O,C,F,k,M=t=>{throw TypeError(t)},E=(t,e,s)=>e.has(t)||M("Cannot "+s),S=(t,e,s)=>(E(t,e,"read from private field"),s?s.call(t):e.get(t)),x=(t,e,s)=>e.has(t)?M("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),W=(t,e,s,i)=>(E(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),A=(t,e,s)=>(E(t,e,"access private method"),s);import{aK as D,aL as U,aM as T,aN as Q,aO as I,aP as P,aQ as _,aR as q,aS as B,aT as L,aU as j,aV as H,aW as N,r as z,a as G,i as K,f as V}from"./index-BKzwkbhU.js";var J=(k=class extends D{constructor(b,v){super(),x(this,y),x(this,t),x(this,e),x(this,s),x(this,i),x(this,r),x(this,a),x(this,n),x(this,o),x(this,h),x(this,c),x(this,u),x(this,l),x(this,d),x(this,p),x(this,f,new Set),this.options=v,W(this,t,b),W(this,o,null),W(this,n,U()),this.options.experimental_prefetchInRender||S(this,n).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(v)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(S(this,e).addObserver(this),X(S(this,e),this.options)?A(this,y,b).call(this):this.updateResult(),A(this,y,R).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Y(S(this,e),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Y(S(this,e),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,A(this,y,w).call(this),A(this,y,O).call(this),S(this,e).removeObserver(this)}setOptions(s){const i=this.options,r=S(this,e);if(this.options=S(this,t).defaultQueryOptions(s),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof T(this.options.enabled,S(this,e)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");A(this,y,C).call(this),S(this,e).setOptions(this.options),i._defaulted&&!Q(this.options,i)&&S(this,t).getQueryCache().notify({type:"observerOptionsUpdated",query:S(this,e),observer:this});const a=this.hasListeners();a&&Z(S(this,e),r,this.options,i)&&A(this,y,b).call(this),this.updateResult(),!a||S(this,e)===r&&T(this.options.enabled,S(this,e))===T(i.enabled,S(this,e))&&I(this.options.staleTime,S(this,e))===I(i.staleTime,S(this,e))||A(this,y,v).call(this);const n=A(this,y,g).call(this);!a||S(this,e)===r&&T(this.options.enabled,S(this,e))===T(i.enabled,S(this,e))&&n===S(this,p)||A(this,y,m).call(this,n)}getOptimisticResult(s){const n=S(this,t).getQueryCache().build(S(this,t),s),o=this.createResult(n,s);return function(t,e){if(!Q(t.getCurrentResult(),e))return!0;return!1}(this,o)&&(W(this,i,o),W(this,a,this.options),W(this,r,S(this,e).state)),o}getCurrentResult(){return S(this,i)}trackResult(t,e){return new Proxy(t,{get:(t,s)=>(this.trackProp(s),null==e||e(s),Reflect.get(t,s))})}trackProp(t){S(this,f).add(t)}getCurrentQuery(){return S(this,e)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(e){const s=S(this,t).defaultQueryOptions(e),i=S(this,t).getQueryCache().build(S(this,t),s);return i.fetch().then((()=>this.createResult(i,s)))}fetch(t){return A(this,y,b).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then((()=>(this.updateResult(),S(this,i))))}createResult(t,l){var d;const p=S(this,e),f=this.options,y=S(this,i),b=S(this,r),v=S(this,a),g=t!==p?t.state:S(this,s),{state:m}=t;let R,w={...m},O=!1;if(l._optimisticResults){const e=this.hasListeners(),s=!e&&X(t,l),i=e&&Z(t,p,l,f);(s||i)&&(w={...w,...j(m.data,t.options)}),"isRestoring"===l._optimisticResults&&(w.fetchStatus="idle")}let{error:C,errorUpdatedAt:F,status:k}=w;R=w.data;let M=!1;if(void 0!==l.placeholderData&&void 0===R&&"pending"===k){let t;(null==y?void 0:y.isPlaceholderData)&&l.placeholderData===(null==v?void 0:v.placeholderData)?(t=y.data,M=!0):t="function"==typeof l.placeholderData?l.placeholderData(null==(d=S(this,u))?void 0:d.state.data,S(this,u)):l.placeholderData,void 0!==t&&(k="success",R=H(null==y?void 0:y.data,t,l),O=!0)}if(l.select&&void 0!==R&&!M)if(y&&R===(null==b?void 0:b.data)&&l.select===S(this,h))R=S(this,c);else try{W(this,h,l.select),R=l.select(R),R=H(null==y?void 0:y.data,R,l),W(this,c,R),W(this,o,null)}catch(I){W(this,o,I)}S(this,o)&&(C=S(this,o),R=S(this,c),F=Date.now(),k="error");const E="fetching"===w.fetchStatus,x="pending"===k,A="error"===k,D=x&&E,T=void 0!==R,Q={status:k,fetchStatus:w.fetchStatus,isPending:x,isSuccess:"success"===k,isError:A,isInitialLoading:D,isLoading:D,data:R,dataUpdatedAt:w.dataUpdatedAt,error:C,errorUpdatedAt:F,failureCount:w.fetchFailureCount,failureReason:w.fetchFailureReason,errorUpdateCount:w.errorUpdateCount,isFetched:w.dataUpdateCount>0||w.errorUpdateCount>0,isFetchedAfterMount:w.dataUpdateCount>g.dataUpdateCount||w.errorUpdateCount>g.errorUpdateCount,isFetching:E,isRefetching:E&&!x,isLoadingError:A&&!T,isPaused:"paused"===w.fetchStatus,isPlaceholderData:O,isRefetchError:A&&T,isStale:$(t,l),refetch:this.refetch,promise:S(this,n)};if(this.options.experimental_prefetchInRender){const e=t=>{"error"===Q.status?t.reject(Q.error):void 0!==Q.data&&t.resolve(Q.data)},s=()=>{const t=W(this,n,Q.promise=U());e(t)},i=S(this,n);switch(i.status){case"pending":t.queryHash===p.queryHash&&e(i);break;case"fulfilled":"error"!==Q.status&&Q.data===i.value||s();break;case"rejected":"error"===Q.status&&Q.error===i.reason||s()}}return Q}updateResult(){const t=S(this,i),s=this.createResult(S(this,e),this.options);if(W(this,r,S(this,e).state),W(this,a,this.options),void 0!==S(this,r).data&&W(this,u,S(this,e)),Q(s,t))return;W(this,i,s);A(this,y,F).call(this,{listeners:(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!S(this,f).size)return!0;const r=new Set(s??S(this,f));return this.options.throwOnError&&r.add("error"),Object.keys(S(this,i)).some((e=>{const s=e;return S(this,i)[s]!==t[s]&&r.has(s)}))})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&A(this,y,R).call(this)}},t=new WeakMap,e=new WeakMap,s=new WeakMap,i=new WeakMap,r=new WeakMap,a=new WeakMap,n=new WeakMap,o=new WeakMap,h=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,y=new WeakSet,b=function(t){A(this,y,C).call(this);let s=S(this,e).fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(s=s.catch(P)),s},v=function(){A(this,y,w).call(this);const t=I(this.options.staleTime,S(this,e));if(_||S(this,i).isStale||!q(t))return;const s=B(S(this,i).dataUpdatedAt,t);W(this,l,setTimeout((()=>{S(this,i).isStale||this.updateResult()}),s+1))},g=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(S(this,e)):this.options.refetchInterval)??!1},m=function(t){A(this,y,O).call(this),W(this,p,t),!_&&!1!==T(this.options.enabled,S(this,e))&&q(S(this,p))&&0!==S(this,p)&&W(this,d,setInterval((()=>{(this.options.refetchIntervalInBackground||L.isFocused())&&A(this,y,b).call(this)}),S(this,p)))},R=function(){A(this,y,v).call(this),A(this,y,m).call(this,A(this,y,g).call(this))},w=function(){S(this,l)&&(clearTimeout(S(this,l)),W(this,l,void 0))},O=function(){S(this,d)&&(clearInterval(S(this,d)),W(this,d,void 0))},C=function(){const i=S(this,t).getQueryCache().build(S(this,t),this.options);if(i===S(this,e))return;const r=S(this,e);W(this,e,i),W(this,s,i.state),this.hasListeners()&&(null==r||r.removeObserver(this),i.addObserver(this))},F=function(s){N.batch((()=>{s.listeners&&this.listeners.forEach((t=>{t(S(this,i))})),S(this,t).getQueryCache().notify({query:S(this,e),type:"observerResultsUpdated"})}))},k);function X(t,e){return function(t,e){return!1!==T(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&Y(t,e,e.refetchOnMount)}function Y(t,e,s){if(!1!==T(e.enabled,t)){const i="function"==typeof s?s(t):s;return"always"===i||!1!==i&&$(t,e)}return!1}function Z(t,e,s,i){return(t!==e||!1===T(i.enabled,t))&&(!s.suspense||"error"!==t.state.status)&&$(t,s)}function $(t,e){return!1!==T(e.enabled,t)&&t.isStaleByTime(I(e.staleTime,t))}var tt=z.createContext(!1);tt.Provider;var et=z.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}());function st(){}var it=(t,e,s)=>e.fetchOptimistic(t).catch((()=>{s.clearReset()}));function rt(t,e,s){var i,r,a,n,o;const h=G(),c=z.useContext(tt),u=z.useContext(et),l=h.defaultQueryOptions(t);null==(r=null==(i=h.getDefaultOptions().queries)?void 0:i._experimental_beforeQuery)||r.call(i,l),l._optimisticResults=c?"isRestoring":"optimistic",(t=>{const e=t.staleTime;t.suspense&&(t.staleTime="function"==typeof e?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,1e3)))})(l),((t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))})(l,u),(t=>{z.useEffect((()=>{t.clearReset()}),[t])})(u);const d=!h.getQueryCache().get(l.queryHash),[p]=z.useState((()=>new e(h,l))),f=p.getOptimisticResult(l),y=!c&&!1!==t.subscribed;if(z.useSyncExternalStore(z.useCallback((t=>{const e=y?p.subscribe(N.batchCalls(t)):st;return p.updateResult(),e}),[p,y]),(()=>p.getCurrentResult()),(()=>p.getCurrentResult())),z.useEffect((()=>{p.setOptions(l)}),[l,p]),((t,e)=>(null==t?void 0:t.suspense)&&e.isPending)(l,f))throw it(l,p,u);if((({result:t,errorResetBoundary:e,throwOnError:s,query:i,suspense:r})=>{return t.isError&&!e.isReset()&&!t.isFetching&&i&&(r&&void 0===t.data||(a=s,n=[t.error,i],"function"==typeof a?a(...n):!!a));var a,n})({result:f,errorResetBoundary:u,throwOnError:l.throwOnError,query:h.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw f.error;if(null==(n=null==(a=h.getDefaultOptions().queries)?void 0:a._experimental_afterQuery)||n.call(a,l,f),l.experimental_prefetchInRender&&!_&&((t,e)=>t.isLoading&&t.isFetching&&!e)(f,c)){const t=d?it(l,p,u):null==(o=h.getQueryCache().get(l.queryHash))?void 0:o.promise;null==t||t.catch(st).finally((()=>{p.updateResult()}))}return l.notifyOnChangeProps?f:p.trackResult(f)}function at(t,e){return rt(t,J)}const nt={Food:"#FF9F7A",Groceries:"#4ADE80",Utilities:"#A17FFF",Housing:"#7AB2F5",Transportation:"#F87DB5",Entertainment:"#FACC15",Shopping:"#FF7A92",Personal:"#9E75FF",Education:"#38BDF8",Travel:"#66CDAA",Insurance:"#F472B6",Debt:"#C084FC",Savings:"#A3E635",Healthcare:"#60A5FA",General:"#FF8042",Other:"#94A3B8"},ot=(t,e)=>K(t,e),ht=t=>{const e=t.reduce(((t,e)=>{const s=V(new Date(e.date),"MMM yyyy");return t[s]||(t[s]={},Object.keys(nt).forEach((e=>{t[s][e]=0}))),t[s][e.category]=(t[s][e.category]||0)+Number(e.amount),t}),{});return Object.entries(e).sort((([t],[e])=>{const s=new Date(t),i=new Date(e);return s.getTime()-i.getTime()})).map((([t,e])=>({month:t,...e})))},ct=t=>{const e=t.reduce(((t,e)=>(t[e.category]||(t[e.category]=0),t[e.category]+=Number(e.amount),t)),{}),s=Object.values(e).reduce(((t,e)=>t+e),0);return Object.entries(e).sort((([,t],[,e])=>e-t)).slice(0,8).map((([t,e])=>({name:t,value:e,color:nt[t]||"#94A3B8",percent:s>0?e/s*100:0})))};export{nt as C,ct as c,ot as f,ht as p,at as u};

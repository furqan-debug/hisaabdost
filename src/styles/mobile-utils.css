
/* Mobile Utility Styles */
@media (max-width: 640px) {
  h1 {
    @apply text-xl font-bold tracking-tight;
  }
  h2 {
    @apply text-lg font-semibold;
  }
  h3 {
    @apply text-base font-medium;
  }
  p {
    @apply text-sm;
  }
  input, select, textarea, button {
    @apply text-sm;
  }
  
  /* Fix centering for mobile elements */
  .mobile-center {
    @apply flex justify-center items-center;
  }
  
  /* Adjust touch targets */
  .touch-target {
    @apply min-h-10 min-w-10;
  }
  
  /* Ensure all content stays within container */
  .mobile-container-fix {
    @apply w-full px-0;
    max-width: 100%;
    overflow-x: hidden !important;
    width: 100%;
  }
  
  /* Force budget tab content to wrap */
  .budget-tab-content-wrap {
    @apply w-full max-w-full break-words;
    overflow-x: hidden !important;
    width: 100%;
  }
  
  /* Optimize for small screens */
  .mobile-text-xs {
    @apply text-xs;
  }
  
  .mobile-text-sm {
    @apply text-sm;
  }
  
  .mobile-p-1 {
    @apply p-1;
  }
  
  .mobile-p-2 {
    @apply p-2;
  }
  
  .mobile-gap-1 {
    @apply gap-1;
  }
  
  .mobile-h-auto {
    @apply h-auto;
  }
  
  /* Fix form inputs for mobile */
  .mobile-input {
    @apply text-sm py-1.5 px-2;
  }
  
  /* Responsive spacing */
  .sm-spacing {
    @apply p-2 gap-2;
  }
  
  /* Responsive text truncation */
  .mobile-truncate {
    @apply truncate max-w-[180px];
  }
  
  /* Finny chat - bottom padding to prevent overlap */
  .finny-chat-container {
    padding-bottom: 70px !important;
  }
  
  /* Improve touch scrolling on mobile */
  .touch-scroll {
    -webkit-overflow-scrolling: touch;
    touch-action: pan-y;
    overscroll-behavior-y: contain;
  }

  /* Fix dropdown scrolling on mobile */
  .radix-dropdown-content,
  .radix-select-content,
  [data-radix-popper-content-wrapper] {
    max-height: 50vh !important;
    -webkit-overflow-scrolling: touch !important;
    touch-action: pan-y !important; overscroll-behavior-y: contain !important;
  }
  
  /* Enhanced dropdown touch scrolling */
  [data-state="open"] {
    .select-viewport,
    [role="listbox"],
    [data-radix-select-viewport] {
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      touch-action: pan-y;
    }
  }
  
  /* Fix for settings sidebar user section */
  .settings-user-section-container {
    position: sticky;
    bottom: 0;
    background-color: var(--background);
    width: 100%;
    z-index: 10;
  }
  
  /* Keyboard visibility fixes */
  input[type="text"],
  textarea {
    position: relative;
    z-index: 5;
  }
  
  /* Avoid keyboard overlap */
  .keyboard-avoid {
    position: sticky;
    bottom: 0;
    z-index: 99;
  }
  
  /* Adjust content when keyboard is open */
  .keyboard-aware {
    position: relative;
  }
  
  /* Chat input visibility fix */
  .chat-input-visible {
    position: sticky;
    bottom: 0;
    z-index: 50;
    background-color: var(--background);
  }
}

/* Remove scrollbar but keep functionality */
.no-scrollbar {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

/* Make sure all content is visible */
.overflow-guard {
  width: 100%;
  max-width: 100%;
  overflow-x: hidden;
}

/* Prevent horizontal scrolling */
.prevent-x-overflow {
  overflow-x: hidden;
  max-width: 100vw;
  width: 100%;
}

/* Responsive font sizes */
.responsive-text-xs {
  font-size: clamp(0.7rem, 2.5vw, 0.8rem);
}

.responsive-text-sm {
  font-size: clamp(0.8rem, 2.5vw, 0.9rem);
}

.responsive-text-base {
  font-size: clamp(0.9rem, 2.5vw, 1rem);
}

.responsive-text-lg {
  font-size: clamp(1rem, 2.5vw, 1.2rem);
}

/* Safe area adjustments for mobile - Android status bar fix */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* Safe area adjustment for top status bar - Android specific */
.safe-area-top {
  padding-top: max(env(safe-area-inset-top, 0px), 20px);
}

/* Android specific status bar padding */
@media screen and (max-width: 640px) {
  .safe-area-top {
    padding-top: max(env(safe-area-inset-top, 0px), 24px);
  }
}

/* Prevent scrolling when splash screen is active */
.no-scroll {
  overflow: hidden !important;
  height: 100vh !important;
  width: 100vw !important;
  position: fixed !important;
  touch-action: none !important;
}

/* Touch-friendly scrolling container */
.touch-scroll-container {
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.touch-scroll-container::-webkit-scrollbar {
  display: none;
}

/* Enhanced mobile dropdown styles */
@media (max-width: 640px) {
  [data-radix-popper-content-wrapper] {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1) !important;
    background-color: var(--background) !important;
    touch-action: pan-y !important;
    -webkit-overflow-scrolling: touch !important;
  }
}

/* Scrollable area with momentum */
.momentum-scroll {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  overscroll-behavior: contain;
}

/* Touch-friendly dropdown scrolling */
.touch-scroll {
  -webkit-overflow-scrolling: touch !important;
  touch-action: pan-y !important;
  overscroll-behavior-y: contain !important;
  overflow-y: auto !important;
  max-height: 40vh !important;
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

.touch-scroll::-webkit-scrollbar {
  display: none !important;
}

/* Android keyboard and input handling */
.android-input-fix {
  position: relative; 
  z-index: 999;
  background-color: var(--background);
}

/* Android keyboard open state */
.android-keyboard-open .finny-input-mobile,
.finny-input-focused .finny-input-mobile {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 9999 !important;
  background-color: var(--background) !important;
  border-top: 1px solid var(--border) !important;
}

/* Keyboard focused input styling */
.keyboard-focused {
  position: fixed !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 9999 !important;
  background-color: var(--background) !important;
  padding: 16px !important;
  border-top: 1px solid var(--border) !important;
}

/* Dynamic height adjustment for keyboard */
@supports (height: 100dvh) {
  .dynamic-height-container {
    height: 100dvh;
  }
  
  /* Finny chat mobile layout with dynamic viewport height */
  .finny-chat-mobile-fix {
    height: 100dvh !important;
  }
}

/* Finny chat body states */
.finny-chat-open {
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
}

/* Finny mobile layout improvements */
.finny-messages-mobile {
  flex: 1 !important;
  overflow-y: auto !important;
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch !important;
}

.finny-input-mobile {
  flex-shrink: 0 !important;
  position: sticky !important;
  bottom: 0 !important;
  background: var(--background) !important;
  z-index: 10 !important;
}

/* Android version specific fixes */
@media screen and (max-width: 640px) {
  /* Android 15+ specific status bar handling */
  .safe-area-top {
    padding-top: max(env(safe-area-inset-top, 0px), 28px);
  }
  
  /* Ensure Finny chat works on all Android versions */
  .finny-chat-mobile-fix {
    height: 100vh !important;
    height: 100dvh !important;
  }
  
  /* Input visibility on Android keyboard open */
  .android-keyboard-open .keyboard-avoid {
    transform: translateY(-50px) !important;
    transition: transform 0.2s ease-out !important;
  }
}

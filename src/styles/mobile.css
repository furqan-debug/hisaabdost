
/* Mobile optimizations - main file
Most styles are now organized into component-specific files:
- mobile-budget.css: Budget-specific styles
- mobile-cards.css: Card component styles
- mobile-navigation.css: Navigation elements
- mobile-tables.css: Table optimizations
- mobile-charts.css: Chart component adjustments
- mobile-utils.css: General utilities and helpers
*/

/* This file contains only the base mobile styles - OPTIMIZED to prevent rendering issues */
@media (max-width: 640px) {
  /* Base mobile styles */
  body, html {
    overflow-x: hidden;
    width: 100%;
    position: relative;
    -webkit-overflow-scrolling: touch; /* Improve scrolling on iOS */
    overscroll-behavior-y: none; /* Prevent pull-to-refresh */
    touch-action: manipulation; /* Prevent double-tap to zoom */
  }
  
  /* CRITICAL: Container stabilization */
  body {
    min-height: 100%;
    height: 100%;
    /* Ensure content doesn't get hidden behind fixed navigation */
    padding-bottom: 0 !important;
  }
  
  /* Prevent horizontal overflow */
  div, section, nav, main, article, header, footer {
    max-width: 100vw;
    overflow-x: hidden;
  }

  /* Adjust padding for main content */
  .max-w-full {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  
  /* Ensure content doesn't cause horizontal scrolling */
  .overflow-guard {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
  }

  /* Fix for layout glitches */
  .flex-1 {
    min-height: 0; /* Fix flexbox height calculation issues */
  }
  
  /* Prevent text selection for better performance */
  .dashboard-container {
    user-select: none;
  }

  /* Fix for flickering cards */
  .budget-card,
  .card {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000;
    -webkit-backface-visibility: hidden;
    -webkit-perspective: 1000;
    will-change: transform;
  }
  
  /* Fix for sticky bottom navigation */
  .fixed.bottom-0 {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 999 !important;
  }
  
  /* Fix layout issues with bottom navigation */
  main {
    padding-bottom: 5rem !important;
  }
  
  /* Adjust bottom spacing for content */
  .pb-16 {
    padding-bottom: 5rem !important;
  }
  
  /* Force bottom navigation to stay fixed */
  .fixed {
    position: fixed !important;
  }
  
  /* Fix for localStorage persistence issues */
  input, button {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Prevent excessive repainting */
  * {
    contain: content;
  }
  
  /* Stabilize the text layout */
  .text-lg, .text-xl, .text-2xl, .font-bold {
    text-rendering: optimizeSpeed;
  }
  
  /* Disable iOS text size adjustment */
  html {
    -webkit-text-size-adjust: 100%;
  }
}

/* Fix for iOS safari viewport height issues */
:root {
  --vh: 1vh;
}

@supports (-webkit-touch-callout: none) {
  .min-h-screen {
    min-height: calc(var(--vh, 1vh) * 100);
    height: calc(var(--vh, 1vh) * 100);
  }
  
  /* Fix for bottom navigation on iOS */
  .fixed.bottom-0 {
    bottom: 0 !important;
    padding-bottom: env(safe-area-inset-bottom, 0);
    height: calc(4rem + env(safe-area-inset-bottom, 0)) !important;
  }
}

/* CRITICAL: Force hardware acceleration on all elements */
@media (max-width: 640px) {
  .card,
  .budget-card,
  .dashboard-container,
  .menu-item,
  button,
  input,
  select,
  .stat-card {
    will-change: auto;
    backface-visibility: hidden;
    transform: translateZ(0);
    -webkit-font-smoothing: subpixel-antialiased;
  }
  
  /* Fix for bottom nav z-index issues */
  .fixed {
    z-index: 50;
    transform: translateZ(0);
  }
  
  /* Force hardware acceleration for bottom navigation */
  .fixed.bottom-0 {
    will-change: transform;
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
}
